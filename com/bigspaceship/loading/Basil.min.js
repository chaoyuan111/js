if(!window['Basil']){function Basil($name){var _self=this;var _hasOut=window['Out']?true:false;var _include=[];var _included=[];var _classes=[];var _extensions={};var _isComplete=false;this.name=$name||'Basil';this.baseUrl='';this.forceComplete=function forceComplete(){_includeComplete();return null;};this.flush=function flush(){if(_hasOut)Out.debug(_self,"Flushing "+_self.name+" includes.");_include=[];_included=[];_classes=[];};this.register=function register($class){_classes.push($class);};this.extend=function extend($classA,$classB,$isStatic){var _n=$classA.name;var _t,_c,_c1,_c2;if(typeof(window[$classB])=='function'){_t=new window[$classB]();for(var i in _t){_c2=_t[i];if(typeof(_c2)=='function'){if($classA[i]){(function(){var __1=$.extend($classA[i],[]);var __2=$.extend(_t[i],[]);$classA[i]=function _extended_function(){return(function _superClass(){this.super=__2;return __1();})();};})();}};};}else if($isStatic){if(_hasOut)Out.debug(_self,"Extending "+$classA.name+" with "+$classB);_extensions[$classA.name]=$classB;return $classA;}else if(typeof(window[$classB])=='object'){if(window[$classB]==undefined){if(_hasOut)Out.error(_self,"Static class ["+$classB+"] doesn't exist yet. Cannot be extended.");}else{var _t=$.extend(_t,window[$classB]);if(_hasOut)Out.debug(_self,"Extending static class");}}else{if(_hasOut)Out.error(_self,"Class ["+$classB+"] doesn't exist. via@"+$classA['name']);};_t=$.extend(true,_t,$classA);_t.name=_n;if(_t['setSelf'])
_t.setSelf(_t);return _t;};this.create=function create($class){_lastClass=$class;return $class;for(var i in $class){$class.__proto__.constructor.prototype[i]=$class[i];delete $class[i];}
return $class;};this.include=function include($file){if(_isDuplicateInclude(_self.baseUrl+$file)){if(_hasOut)Out.warning(_self,"Already included: "+$file);return;};_include.push(_self.baseUrl+$file);if(_hasOut)Out.debug(_self,"Including: "+$file);$.ajax({contentType:'text/javascript',dataType:'script',url:_self.baseUrl+$file,complete:_include_COMPLETE_handler});};this.execute=function execute($params){if(_hasOut)Out.debug(_self,"Executing: "+$params.url);var baseUrl=$params.url.split('/');baseUrl.pop();baseUrl=baseUrl.join('/')+'/';$.ajax({contentType:'text/javascript',dataType:'script',url:$params.url,complete:function execute_complete($data){if(!$data){if(_hasOut)Out.error(_self,"Check that you are on a correct domain and do not need proxy.");return;};var pattern=/this\.name[^=]+[^'"]+.([^'"]+)['"]./;var name=$data.responseText.match(pattern);name=name[1];if(_hasOut)Out.debug(_self,"Name should be: "+name);if(window[name]){window[name].basil=new Basil(window[name].name);window[name].basil.baseUrl=baseUrl;window[name].assets=baseUrl+'assets/';window[name].getAsset=function getAsset($url){return window[name].assets+$url;};};if(window[name]&&window[name].construct){window[name].construct($params);}}});};function _proxify($url){var url=$url;if(url.indexOf('http://')>-1){url=BASEURL+"proxy.php?file="+url;}else{url=BASEURL+url;};return url;};function _isDuplicateInclude($file){if(_include.indexOf($file)>-1||_included.hasOwnProperty($file)||_included.indexOf($file)>-1){return true;};return false;};function _includeComplete(){var i;_isComplete=true;if(_hasOut)Out.debug(_self,"Downloads complete... Waiting for document load.");if(window['___DOCUMENT_LOADED']){_extendAndInitiate();}else{$(document).ready(_extendAndInitiate);};};function _extendAndInitiate(){___DOCUMENT_LOADED=true;for(i in _classes){if(Array.prototype[i]!=_classes[i]&&typeof(_classes[i])!='function'){if(!_classes[i].hasOwnProperty('construct')&&!_classes[i].construct){if(_hasOut)Out.error(_self,_classes[i].name+" doesn't have construct method");}else{_classes[i].construct();}}};for(i in _extensions){for(ii in _classes){if(_classes[ii].name==i){window[_classes[ii].name]=_self.extend(_classes[ii],_extensions[i]);};};};for(i in _classes){if(Array.prototype[i]!=_classes[i]&&typeof(_classes[i])!='function'){if(!_classes[i].hasOwnProperty('init')&&!_classes[i].init){if(_hasOut)Out.error(_self,_classes[i].name+" doesn't have init method");}else{_classes[i].init();}};};if(_self.complete)
_self.complete();if(_hasOut)Out.debug(_self,"Classes construct/extend/init completed.");};function _findClassByName($name){for(var i in _classes){if(_classes[i]==$name){return _classes[i];};};return window[$name];};function _include_COMPLETE_handler($data){var lastRequested=_include[_included.length];_included[lastRequested]=1;_included.push(lastRequested);setTimeout(function(){if(_included.length==_include.length&&!_isComplete){_includeComplete();};},500);};return this;};};
